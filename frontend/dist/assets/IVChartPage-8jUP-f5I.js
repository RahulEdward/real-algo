import{a as s,j as e}from"./vendor-react-Bde5w1iN.js";import{T as P}from"./search-BXjqKZLA.js";import{U as F}from"./UnderlyingSelector-DjoW0y42.js";import{B as K,t as i}from"./index-BajzrNI3.js";import{C as p,b as j,c as y,a as u}from"./card-mz1ygTyE.js";import{L as f}from"./label-sTsobr-L.js";import{S as g,a as v,b as C,c as S,d as I}from"./select-DfeukBJp.js";import{L as U}from"./vendor-icons-Do0RMBwc.js";import{R as _,h as A,C as O,X as R,Y as B,T as H,L as X,j as o}from"./vendor-charts-DMFZZfud.js";import"./vendor-router-BFkrKKjM.js";import"./vendor-radix-DxOrs8Le.js";function ae(){const[l,V]=s.useState("NFO"),[r,L]=s.useState(""),[n,N]=s.useState(""),[c,T]=s.useState("5m"),[d,b]=s.useState("1"),[h,m]=s.useState(!1),[x,E]=s.useState([]),[D,k]=s.useState([]);s.useEffect(()=>{fetch("/ivchart/api/intervals").then(a=>a.json()).then(a=>{if(a.status==="success"&&a.data){const t=[...a.data.minutes||[],...a.data.hours||[]];k(t)}})},[]);const w=async()=>{if(!r||!n){i.error("Please select underlying and expiry");return}m(!0);try{const t=await(await fetch("/ivchart/api/iv-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({underlying:r,exchange:l,expiry_date:n,interval:c,days:parseInt(d)})})).json();t.status==="success"?E(t.data||[]):i.error(t.message||"Failed to fetch IV data")}catch{i.error("Failed to fetch IV data")}finally{m(!1)}};return e.jsxs(P,{title:"IV Chart",description:"Historical implied volatility charts with multiple intervals",children:[e.jsxs(p,{className:"mb-6",children:[e.jsx(j,{children:e.jsx(y,{children:"Select Parameters"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsx(F,{exchange:l,underlying:r,expiry:n,onExchangeChange:V,onUnderlyingChange:L,onExpiryChange:N}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Interval"}),e.jsxs(g,{value:c,onValueChange:T,children:[e.jsx(v,{children:e.jsx(C,{})}),e.jsx(S,{children:D.map(a=>e.jsx(I,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Days"}),e.jsxs(g,{value:d,onValueChange:b,children:[e.jsx(v,{children:e.jsx(C,{})}),e.jsx(S,{children:[1,2,3,5,7,10,15].map(a=>e.jsxs(I,{value:a.toString(),children:[a," ",a===1?"day":"days"]},a))})]})]})]}),e.jsxs(K,{onClick:w,disabled:h,children:[h&&e.jsx(U,{className:"mr-2 h-4 w-4 animate-spin"}),"Fetch IV Data"]})]})]}),x.length>0&&e.jsxs(p,{children:[e.jsx(j,{children:e.jsx(y,{children:"Implied Volatility Chart"})}),e.jsx(u,{children:e.jsx("div",{className:"h-[500px]",children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(A,{data:x,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"timestamp"}),e.jsx(B,{domain:["auto","auto"]}),e.jsx(H,{}),e.jsx(X,{}),e.jsx(o,{type:"monotone",dataKey:"atm_iv",name:"ATM IV",stroke:"#3b82f6",dot:!1}),e.jsx(o,{type:"monotone",dataKey:"call_iv",name:"Call IV",stroke:"#22c55e",dot:!1}),e.jsx(o,{type:"monotone",dataKey:"put_iv",name:"Put IV",stroke:"#ef4444",dot:!1})]})})})})]})]})}export{ae as default};
