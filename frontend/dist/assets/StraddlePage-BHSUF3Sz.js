import{a,j as e}from"./vendor-react-Bde5w1iN.js";import{T as w}from"./search-BXjqKZLA.js";import{U as A}from"./UnderlyingSelector-DjoW0y42.js";import{B as F,t as l}from"./index-BajzrNI3.js";import{C as p,b as u,c as y,a as g}from"./card-mz1ygTyE.js";import{L as f}from"./label-sTsobr-L.js";import{S,a as C,b as v,c as L,d as t}from"./select-DfeukBJp.js";import{L as I}from"./vendor-icons-Do0RMBwc.js";import{R as K,h as U,C as _,X as O,Y as R,T as V,L as B,j as d}from"./vendor-charts-DMFZZfud.js";import"./vendor-router-BFkrKKjM.js";import"./vendor-radix-DxOrs8Le.js";function $(){const[o,T]=a.useState("NFO"),[r,N]=a.useState(""),[n,b]=a.useState(""),[c,k]=a.useState("1m"),[m,D]=a.useState("5"),[h,x]=a.useState(!1),[j,E]=a.useState([]),P=async()=>{if(!r||!n){l.error("Please select underlying and expiry");return}x(!0);try{const i=await(await fetch("/straddle/api/straddle-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({underlying:r,exchange:o,expiry_date:n,interval:c,days:parseInt(m)})})).json();i.status==="success"?E(i.data||[]):l.error(i.message||"Failed to fetch straddle data")}catch{l.error("Failed to fetch straddle data")}finally{x(!1)}};return e.jsxs(w,{title:"Straddle Chart",description:"ATM straddle premium tracking over time",children:[e.jsxs(p,{className:"mb-6",children:[e.jsx(u,{children:e.jsx(y,{children:"Select Parameters"})}),e.jsxs(g,{className:"space-y-4",children:[e.jsx(A,{exchange:o,underlying:r,expiry:n,onExchangeChange:T,onUnderlyingChange:N,onExpiryChange:b}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Interval"}),e.jsxs(S,{value:c,onValueChange:k,children:[e.jsx(C,{children:e.jsx(v,{})}),e.jsxs(L,{children:[e.jsx(t,{value:"1m",children:"1m"}),e.jsx(t,{value:"5m",children:"5m"}),e.jsx(t,{value:"15m",children:"15m"}),e.jsx(t,{value:"1h",children:"1h"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Days"}),e.jsxs(S,{value:m,onValueChange:D,children:[e.jsx(C,{children:e.jsx(v,{})}),e.jsx(L,{children:[1,3,5,7,10].map(s=>e.jsxs(t,{value:s.toString(),children:[s," ",s===1?"day":"days"]},s))})]})]})]}),e.jsxs(F,{onClick:P,disabled:h,children:[h&&e.jsx(I,{className:"mr-2 h-4 w-4 animate-spin"}),"Fetch Straddle Data"]})]})]}),j.length>0&&e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(y,{children:"ATM Straddle Premium"})}),e.jsx(g,{children:e.jsx("div",{className:"h-[500px]",children:e.jsx(K,{width:"100%",height:"100%",children:e.jsxs(U,{data:j,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(_,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"timestamp"}),e.jsx(R,{domain:["auto","auto"]}),e.jsx(V,{}),e.jsx(B,{}),e.jsx(d,{type:"monotone",dataKey:"straddle_premium",name:"Straddle",stroke:"#3b82f6",strokeWidth:2}),e.jsx(d,{type:"monotone",dataKey:"call_premium",name:"Call",stroke:"#22c55e",dot:!1}),e.jsx(d,{type:"monotone",dataKey:"put_premium",name:"Put",stroke:"#ef4444",dot:!1})]})})})})]})]})}export{$ as default};
