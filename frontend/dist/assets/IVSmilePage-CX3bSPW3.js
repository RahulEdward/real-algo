import{a as s,j as e}from"./vendor-react-Bde5w1iN.js";import{T as L}from"./search-BXjqKZLA.js";import{U as V}from"./UnderlyingSelector-DjoW0y42.js";import{B as I,t as o}from"./index-BajzrNI3.js";import{C as m,b as h,c as x,a as p}from"./card-mz1ygTyE.js";import{L as T}from"./vendor-icons-Do0RMBwc.js";import{R as v,h as N,C as P,X as b,Y as E,T as w,L as D,e as F,j}from"./vendor-charts-DMFZZfud.js";import"./vendor-router-BFkrKKjM.js";import"./label-sTsobr-L.js";import"./vendor-radix-DxOrs8Le.js";import"./select-DfeukBJp.js";function G(){const[n,u]=s.useState("NFO"),[r,f]=s.useState(""),[i,y]=s.useState(""),[l,c]=s.useState(!1),[d,g]=s.useState([]),[t,C]=s.useState(null),S=async()=>{if(!r||!i){o.error("Please select underlying and expiry");return}c(!0);try{const a=await(await fetch("/ivsmile/api/iv-smile-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({underlying:r,exchange:n,expiry_date:i})})).json();a.status==="success"?(g(a.data||[]),C(a.spot_price||null)):o.error(a.message||"Failed to fetch IV smile data")}catch{o.error("Failed to fetch IV smile data")}finally{c(!1)}};return e.jsxs(L,{title:"IV Smile",description:"Visualize volatility smile across different strikes",children:[e.jsxs(m,{className:"mb-6",children:[e.jsx(h,{children:e.jsx(x,{children:"Select Parameters"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx(V,{exchange:n,underlying:r,expiry:i,onExchangeChange:u,onUnderlyingChange:f,onExpiryChange:y}),e.jsxs(I,{onClick:S,disabled:l,children:[l&&e.jsx(T,{className:"mr-2 h-4 w-4 animate-spin"}),"Fetch IV Smile"]})]})]}),d.length>0&&e.jsxs(m,{children:[e.jsx(h,{children:e.jsxs(x,{children:["IV Smile Chart",t&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["Spot: â‚¹",t.toLocaleString()]})]})}),e.jsx(p,{children:e.jsx("div",{className:"h-[500px]",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(N,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(P,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"strike"}),e.jsx(E,{domain:["auto","auto"]}),e.jsx(w,{}),e.jsx(D,{}),t&&e.jsx(F,{x:t,stroke:"red",strokeDasharray:"5 5",label:"ATM"}),e.jsx(j,{type:"monotone",dataKey:"call_iv",name:"Call IV",stroke:"#22c55e",strokeWidth:2}),e.jsx(j,{type:"monotone",dataKey:"put_iv",name:"Put IV",stroke:"#ef4444",strokeWidth:2})]})})})})]})]})}export{G as default};
