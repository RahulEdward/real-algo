import{a,j as e}from"./vendor-react-Bde5w1iN.js";import{T as G}from"./search-BXjqKZLA.js";import{U as X}from"./UnderlyingSelector-DjoW0y42.js";import{B as L,t as o}from"./index-BajzrNI3.js";import{C as m,b as p,c as h,a as g}from"./card-mz1ygTyE.js";import{L as N}from"./vendor-icons-Do0RMBwc.js";import{R as b,B as P,C as T,X as k,Y as B,T as D,L as _,e as w,f as i}from"./vendor-charts-DMFZZfud.js";import"./vendor-router-BFkrKKjM.js";import"./label-sTsobr-L.js";import"./vendor-radix-DxOrs8Le.js";import"./select-DfeukBJp.js";function q(){const[l,f]=a.useState("NFO"),[r,j]=a.useState(""),[n,u]=a.useState(""),[c,d]=a.useState(!1),[x,y]=a.useState([]),[s,C]=a.useState(null),E=async()=>{if(!r||!n){o.error("Please select underlying and expiry");return}d(!0);try{const t=await(await fetch("/gex/api/gex-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({underlying:r,exchange:l,expiry_date:n})})).json();t.status==="success"?(y(t.data||[]),C(t.spot_price||null)):o.error(t.message||"Failed to fetch GEX data")}catch{o.error("Failed to fetch GEX data")}finally{d(!1)}};return e.jsxs(G,{title:"GEX (Gamma Exposure)",description:"Analyze gamma exposure across strikes to understand dealer positioning",children:[e.jsxs(m,{className:"mb-6",children:[e.jsx(p,{children:e.jsx(h,{children:"Select Parameters"})}),e.jsxs(g,{className:"space-y-4",children:[e.jsx(X,{exchange:l,underlying:r,expiry:n,onExchangeChange:f,onUnderlyingChange:j,onExpiryChange:u}),e.jsxs(L,{onClick:E,disabled:c,children:[c&&e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Fetch GEX Data"]})]})]}),x.length>0&&e.jsxs(m,{children:[e.jsx(p,{children:e.jsxs(h,{children:["Gamma Exposure Chart",s&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["Spot: â‚¹",s.toLocaleString()]})]})}),e.jsx(g,{children:e.jsx("div",{className:"h-[500px]",children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(P,{data:x,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"strike"}),e.jsx(B,{}),e.jsx(D,{}),e.jsx(_,{}),s&&e.jsx(w,{x:s,stroke:"red",strokeDasharray:"5 5",label:"Spot"}),e.jsx(i,{dataKey:"call_gex",name:"Call GEX",fill:"#22c55e"}),e.jsx(i,{dataKey:"put_gex",name:"Put GEX",fill:"#ef4444"}),e.jsx(i,{dataKey:"net_gex",name:"Net GEX",fill:"#3b82f6"})]})})})})]})]})}export{q as default};
